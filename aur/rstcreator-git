# Maintainer: Theo J.A. de Vries <t.j.a.devries(at)gmail(dot)com>

# for customization
_pkgname=rstcreator
_ext=git
_basedir=/usr
# note: depends=() needs separate customization

pkgname=${_pkgname}-${_ext}
_gitname=rstcreator
pkgver=v0.01.1.g9dccc71
pkgrel=1
pkgdesc="rstCreator facilitates the production of various types of documents with the help of QtCreator and Sphinx."
arch=("any")
url="https://bitbucket.org/theojadevries/rstcreator"
license=("Apache")
groups=()
depends=("qtcreator")
#makedepends=("python-distribute" "git")
optdepends=()
provides=("rstcreator")
#conflicts=()
#backup=()
#options=()
#install=
#source=()

source=(
         'git+https://theojadevries@bitbucket.org/theojadevries/rstcreator.git'
        )

pkgver() {
  cd $_gitname
  # Use the tag of the last commit
  git describe --always | sed 's|-|.|g'
}

build() {
  cd $_gitname
  msg "Nothing to build.."
}

package() {
#  cd $_gitname
  MODULES=${srcdir}/$_gitname/qbs/modules/*
  for moduleB in ${MODULES}; do 
    MODULENAME=$(basename ${moduleB})
    msg "Installing ${MODULENAME}"
    install -m755 -d ${pkgdir}${_basedir}/share/qtcreator/qbs/share/qbs/modules/${MODULENAME}
    FILES=${moduleB}/*
    for fileB in ${FILES}; do 
      install -m644 ${fileB} ${pkgdir}${_basedir}/share/qtcreator/qbs/share/qbs/modules/${MODULENAME}
    done
  done
  msg "Installing highlighter"
  install -m755 -d ${pkgdir}${_basedir}/share/qtcreator/generic-highlighter
  HIGHLIGHTFILES=${srcdir}/$_gitname/generic-highlighter/*
  for fileB in ${FILES}; do 
    install -m644 ${fileB} ${pkgdir}${_basedir}/share/qtcreator/qbs/share/qbs/modules/${MODULENAME}
  done
}
md5sums=('SKIP')
