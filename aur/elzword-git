# Maintainer: Maximilien Noal (noal dot maximilien at gmail dot com) [AUR: xcomcmdr]

pkgname=elzword-git
_gitname=touhy
_pkgprog=elzword
pkgver=50.499d664
pkgrel=2
pkgdesc="Elzen's dictionnary"
arch='any'
license='GPL3'
url='http://fadrienn.irlnc.org/touhy/'
groups='touhy'
depends=('pygtk' 'python2-pysqlite' 'python2-beautifulsoup3')
optdepends=('pywebkitgtk: see words definitions online')
makedepends='git'
md5sums=('SKIP'
  '3b3b6e733b1fb7a1bfc3336df1d50ca5'
  '4faed864ead637965d3da34333ee94bd')
source=('git://fadrienn.irlnc.org/touhy' 'use-env.patch' 'elzword.desktop')

pkgver() {
  cd ${srcdir}/${_gitname}
  echo $(git rev-list --count HEAD).$(git rev-parse --short HEAD)
}

package() {
  cd ${srcdir}/${_gitname}
  mkdir -p ${pkgdir}/usr/bin
  install ${_pkgprog} ${pkgdir}/usr/bin
  install -Dm 644 ${srcdir}/${_pkgprog}.desktop \
    ${pkgdir}/usr/share/applications/${_pkgprog}.desktop
  patch -i ${srcdir}/use-env.patch ${pkgdir}/usr/bin/${_pkgprog}
}
