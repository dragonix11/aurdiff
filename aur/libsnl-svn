# Maintainer: Maurizio D'Addona <mauritiusdadd@gmail.com>
pkgname=libsnl-svn
pkgver=18
pkgrel=2
pkgdesc="libSNL is a library of routines used for the manipulation of NURBS curves and surfaces."
arch=('i686' 'x86_64')
url="http://libsnl.sourceforge.net/"
license=('GPL2')
provides=('libsnl')
conflicts=('libsnl') 
depends=()
makedepends=('svn')


_svntrunk=svn://svn.code.sf.net/p/libsnl/code/trunk
_svnmod=libsnl 

build() 
{
    cd "$srcdir"
    msg "Connecting to SVN server...."
    if [[ -d "$_svnmod/.svn" ]]; then
        (cd "$_svnmod" && svn up -r "$pkgver")
    else
        svn co "$_svntrunk" --config-dir ./ -r "$pkgver" "$_svnmod"
    fi
    [ -d "$srcdir/$_svnmod-build" ] && rm -rf "$srcdir/$_svnmod-build"
    svn export "$srcdir/$_svnmod" "$srcdir/$_svnmod-build"
    msg "Building..."
    cd $_svnmod-build/src
    make
    msg2 "Build complete."
}

package()
{
    cd $_svnmod-build/src
    msg "Copying files..."
    install -Dm644 libSNL.so.0.2 $pkgdir/usr/lib/libSNL.so.0.2
    ln -s libSNL.so.0.2 $pkgdir/usr/lib/libSNL.so
    install -d $pkgdir/usr/include/libSNL
    cp *.h $pkgdir/usr/include/libSNL
} 