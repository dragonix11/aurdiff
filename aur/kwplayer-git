# Maintainer: mindcat <444303908@qq.com>
pkgname=kwplayer-git
pkgver=178.6be37fb
pkgrel=1
pkgdesc="An elegent music player"
url="https://github.com/LiuLang/kwplayer"
arch=('any')
license=('GPLv3')
depends=('gst-plugins-ugly' 'gst-plugins-good' 'gstreamer' 'python-cairo'
         'python-gobject' 'python-mutagenx')
optdepends=('leveldb')
makedepends=('git')
conflicts=()
replaces=()
source=(git+https://github.com/LiuLang/kwplayer.git)
md5sums=('SKIP')

pkgver() {
  cd $srcdir/kwplayer
  printf "%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

#build() {}

package() {
  cd "${srcdir}/kwplayer/build/"
  #source ./build.sh

  FAKEROOT=${pkgdir}
  PYLIB="${FAKEROOT}`python3 -c "import site; print(site.getsitepackages()[0])"`"
  APP='kwplayer'
  
  mkdir -vp $FAKEROOT/usr/bin  $PYLIB
  
  cp -v ../kwplayer $FAKEROOT/usr/bin/
  cp -rvf ../kuwo $PYLIB/
  rm -rvf $PYLIB/kuwo/__pycache__
  cp -rvf ../share $FAKEROOT/usr/share
}

# vim:set ts=2 sw=2 et:
