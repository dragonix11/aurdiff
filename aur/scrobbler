# Maintainer: Никола Вукосављевић <hauzer@gmx.com>

pkgname=scrobbler
_pypipkgname=${pkgname}h
pkgver=1.0.3
pkgrel=1
pkgdesc='A command-line Last.fm scrobbler and a now-playing status updater.'
arch=('any')
url='https://bitbucket.org/hauzer/${pkgname}/'
license=('GPL')
groups=()
depends=('python' 'python-appdirs' 'python-lfm')
makedepends=('python-setuptools')
provides=()
conflicts=()
replaces=()
backup=()
options=(!emptydirs)
install=
source=("https://pypi.python.org/packages/source/s/${_pypipkgname}/${_pypipkgname}-${pkgver}.zip")
md5sums=('6d65e07db85e708de6c4c5e10e9e4b01')

prepare() {
    cat << EOF > "${srcdir}/scrobbler"
#!/usr/bin/env bash
python /usr/bin/scrobbler.py
EOF
}

package() {
  cd "${srcdir}/${_pypipkgname}-${pkgver}"
  python setup.py install --root="${pkgdir}/" --optimize=1
  install -Dm755 "${srcdir}/scrobbler" "${pkgdir}/usr/bin/scrobbler"
}

