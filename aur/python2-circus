# Maintainer: L42y <423300@gmail.com>

pkgname=python2-circus
_pkgname=circus
pkgver=0.9.2
pkgrel=1
pkgdesc="A Process & Socket Manager built with zmq"
url="http://docs.circus.io"
arch=('any')
license=('APL')
depends=("python2" "python2-pyzmq" "python2-psutil" "python2-iowait")
source=(https://github.com/mozilla-services/${_pkgname}/archive/${pkgver}.tar.gz)
md5sums=('ae7cd165828e8c49d534b62142f872a8')

package() {
	cd ${srcdir}/${_pkgname}-${pkgver}

	python2 setup.py install --root=${pkgdir}
    install -d ${pkgdir}/etc/circus/
    install -Dm644 ${srcdir}/${_pkgname}-${pkgver}/debian/${_pkgname}d.ini ${pkgdir}/etc/circus/
    install -d ${pkgdir}/usr/lib/systemd/system/
    sed -i 's/circus /circusd /g' debian/${_pkgname}.service
    install -Dm644 ${srcdir}/${_pkgname}-${pkgver}/debian/${_pkgname}.service ${pkgdir}/usr/lib/systemd/system/
}
