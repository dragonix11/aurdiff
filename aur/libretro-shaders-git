pkgname=libretro-shaders-git
pkgver=156.717b64f
pkgrel=1
pkgdesc="Common shaders for libretro"
arch=(any)
url=https://github.com/libretro/common-shaders
license=(unknown)
makedepends=(git nvidia-cg-toolkit python)
options=(!emptydirs)
source=(git://github.com/libretro/common-shaders.git
	https://github.com/Themaister/RetroArch/raw/master/tools/cg2glsl.py)
md5sums=(SKIP
	 9702dc6a8c41dfaee4e193d5f8d03dc4)

pkgver() {
  cd "$srcdir/common-shaders"
  echo $(git rev-list --count master).$(git rev-parse --short master)
}

build() {
  cd "$srcdir"
  mkdir out
  python cg2glsl.py common-shaders out
}

package() {
  install -d "$pkgdir/usr/share/libretro/shaders"
  cp -r "$srcdir"/out/* "$pkgdir/usr/share/libretro/shaders/"
}

