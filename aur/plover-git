pkgname=plover-git
pkgver=20130812
pkgrel=1
pkgdesc="A free, open source program providing realtime stenographic technology."
arch=(any)
url="https://github.com/plover/plover"
license=('GPLv2')
groups=()
depends=('python2' 'wxpython' 'python2-xlib' 'python2-pyserial' 'python2-lockfile' 'wmctrl'
    'python2-simplejson' 'python2-pyserial' 'python2-appdirs')
makedepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
source=()
noextract=()

_gitroot="https://github.com/plover/plover.git"
_gitname="plover"

build() {
  cd "$srcdir"
  msg "Updating source..."

  if [[ -d "$_gitname" ]]; then
    cd ${_gitname} && git pull origin master
    msg "Tree has been updated."
  else
    git clone ${_gitroot} && cd ${_gitname}
    msg "Tree has been cloned."
  fi

  msg "Checkout completed"
  msg "Starting build..."

  rm -rf "$srcdir/$_gitname-build"
  cp -r "$srcdir/$_gitname" "$srcdir/$_gitname-build"
  cd "$srcdir/$_gitname-build"
}

package() {
  cd "$srcdir/$_gitname-build"
  python2 setup.py install --root="$pkgdir/" --optimize=1
}
