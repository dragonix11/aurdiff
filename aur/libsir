# Maintainer: Rich Li <rich at dranek dot com>
pkgname=libsir
pkgver="2010_08_25"
pkgrel=1
pkgdesc="A C library for reading and writing SIR format files"
arch=('i686' 'x86_64')
url="http://www.mers.byu.edu/SIR.html"
license=('custom')
depends=()
makedepends=()
options=('staticlibs')
source=(ftp://ftp.scp.byu.edu/software/misc/sirclib.tar.gz
        update-from-old-glibc.patch
        LICENSE)
md5sums=('0d805c081df2a51c43a3da080e2400fe'
        '5dc757ed0f403ded75e27acb6d5a89e9'
        '2326604340aa9b589665e4a56efed2c1')

prepare() {
	cd "$srcdir/c"
	patch -p0 -i "$srcdir/update-from-old-glibc.patch"
}

build() {
	cd "$srcdir/c"
	make
}

package() {
    cd "$srcdir"
    # License
    install -D -m644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"

	cd "$srcdir/c"
    # Include files
    install -d "$pkgdir/usr/include"
    install -m644 include/{sir_ez.h,sir3.h} "$pkgdir/usr/include/"
    # Static library
    install -d "$pkgdir/usr/lib"
    install -m644 libcsir.a "$pkgdir/usr/lib/"
}
