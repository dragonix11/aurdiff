# Maintainer: shyokou <shyokou@gmail.com>
pkgname=flashproxy
_pkgname=${pkgname}-client
pkgver=1.3
pkgrel=1
pkgdesc="A python implementation of the Pluggable Transports for Circumvention specification for Tor"
arch=('any')
url="https://crypto.stanford.edu/${pkgname}/"
license=('BSD')
depends=('python2')
optdepends=('tor: you need tor to use this package' )
source=("https://people.torproject.org/~dcf/${pkgname}/${_pkgname}-${pkgver}.zip"{,.asc}
	'flashproxy-1.1-python2.patch')
sha256sums=('bfee85e74d5833e44d34e5b7f3658a780022f98988d29c6d56ff3d26bb25af73'
	'SKIP'
	'b327b20160ef2bd7f8cfca36dbd3b1a0d98fd6be8357acce589a6864c0eb2d2b')

package() {
  cd "${srcdir}/${_pkgname}-${pkgver}"
  for p in ${srcdir}/*.patch ; do
    msg2 "Applying patch ${p##*/}"
    patch -sp1 < ${p} || return $?
  done
  install -Dm0644 LICENSE	"${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
  for f in ${pkgname}-* ; do
    msg2 "Installing script ${f##*/}"
    install -Dm0755 "${f}"	"${pkgdir}/usr/bin/${f}"
  done
  install -Dm0644 torrc		"${pkgdir}/etc/tor/torrc.${pkgname}"
  for f in doc/${pkgname}-*.1 ; do
    msg2 "Installing manual ${f##*/}"
    install -Dm0644 "${f}"	"${pkgdir}/usr/share/man/man1/${f##*/}"
  done
}

# vim:set ts=2 sw=2 et:
