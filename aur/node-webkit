pkgname=node-webkit
pkgver=0.8.0rc1
pkgrel=1
pkgdesc="node-webkit is an app runtime based on Chromium and node.js."
arch=("i686" "x86_64")
url="https://github.com/rogerwang/node-webkit"
license=("MIT")
depends=("alsa-lib" "gconf" "gtk2" "nss" "libudev.so.0")
optdepends=("nodejs: npm package support"
"nw-gyp: native add-on build tool for node-webkit")

if [ "$CARCH" = "i686" ]; then
  _arch="ia32"
  sha256sums=("7327426495d1467fe63c089030e37f6728eda35c8035d40d462e6efda2438fb2")
fi
if [ "$CARCH" = "x86_64" ]; then
  _arch="x64"
  sha256sums=("280d9eaec0fa55d07a1d3a0ea707bd716b50bcf9498d95dc418176199ebd45a9")
fi

source=( "https://s3.amazonaws.com/0.8.0-rc1/v0.8.0-rc1/${pkgname}-v0.8.0-rc1-linux-${_arch}.tar.gz" )

package() {
  msg2 "create path and copy files"
  mkdir -p $pkgdir/usr/{lib/${pkgname},bin}
  cp -R $srcdir/${pkgname}-v0.8.0-rc1-linux-$_arch/* $pkgdir/usr/lib/node-webkit/
  
  msg2 "symlink /usr/bin/nw -> /usr/lib/${pkgname}/nw"
  ln -s "/usr/lib/${pkgname}/nw" "$pkgdir/usr/bin/nw"

  msg2 "symlink /usr/bin/nwsnapshot -> /usr/lib/${pkgname}/nwsnapshot"
  ln -s "/usr/lib/${pkgname}/nwsnapshot" "$pkgdir/usr/bin/nwsnapshot"
}

