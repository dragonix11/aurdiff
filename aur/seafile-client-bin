# Maintainer: localizator <localizator@ukr.net>

pkgname=seafile-client-bin
pkgver=2.0.3
pkgrel=1
pkgdesc="Seafile is an online file storage and collaboration tool. This is the seafile client for synchronizing your local files with a seafile server."
url="http://seafile.com"
license=(GPLv3)
groups=('network')
depends=('jansson' 'qt4' 'libevent' 'sqlite' 'openssl' 'python2-simplejson')
arch=('i686' 'x86_64')

options=()
_realname=seafile

if [ "$CARCH" = 'i686' ]; then
    source=(
        "${_realname}_${pkgver}_i386.deb::http://seacloud.cc/group/3/file/d/${_realname}_${pkgver}_i386.deb" 
        "seaf-cli-python2.patch"
    )
    sha256sums=(
        '7cfedb2ae72214a8ef69975b051be56356f56d2963c86741dbc336ce05923abe'
        '5af002d56bad1071c6c8b675abbcd5211cd0734760ffdb599b78f4c2ceaa0b41'
    )
elif [ "$CARCH" = "x86_64" ]; then
    source=(
        "${_realname}_${pkgver}_amd64.deb::http://seacloud.cc/group/3/file/d/${_realname}_${pkgver}_amd64.deb" 
        "seaf-cli-python2.patch"
    )
    sha256sums=(
        '180eb83151602d70715f57b4b74f205a116be4a8a278869b6f94fe8b308a3b6a'
        '5af002d56bad1071c6c8b675abbcd5211cd0734760ffdb599b78f4c2ceaa0b41'
    )
fi

prepare() {
    cd $srcdir
    tar xvf data.tar.gz
}
build() {
    patch -p0 < seaf-cli-python2.patch
    mv usr/lib/python2.7/dist-packages usr/lib/python2.7/site-packages
}

package() {
    cp -rp usr $pkgdir
}
