# Maintainer: Martin Wimpress <code@flexion.org>

pkgname=btsyncindicator
pkgver=0.9
pkgrel=1
pkgdesc="Bittorrent Sync indicator for Linux desktops."
arch=('any')
url="https://github.com/marxjohnson/btsyncindicator"
license=('GPL3')
depends=('btsync' 'libappindicator' 'python2' 'python2-requests' 'pygtk')
source=(https://github.com/marxjohnson/${pkgname}/archive/v${pkgver}.tar.gz
       ${pkgname}.desktop)
md5sums=('fd2b992cae52043e8ceb5e9b851adb27'
         'd697d88ead6f77450d4065b2c1699259')

build() {
    cd ${srcdir}/${pkgname}-${pkgver}
    sed -i 's/env python/env python2/' ${pkgname}.py
}

package() {
    install -D -m 0644 ${pkgname}.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop
    cd ${srcdir}/${pkgname}-${pkgver}
    install -D -m 0755 ${pkgname}.py ${pkgdir}/usr/bin/${pkgname}
    for ICON in icons/*
    do
        install -D -m 0644 ${ICON} $pkgdir/usr/share/pixmaps/${pkgname}/$(basename ${ICON})
    done
}
