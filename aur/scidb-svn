# Maintainer: q9 <qqqqqqqqq9 at web dot de>
pkgname=scidb-svn
_realpkgname=trunk
pkgver=20130917
pkgrel=5
# epoch=
pkgdesc="Scidb is a Chess Information Data Base SVN-Checkout"
arch=('x86_64' 'i686')
url="http://scidb.sourceforge.net/"
license=('GPL2')
depends=('tk' 'zziplib' 'shared-mime-info'  'minizip' 'libxcursor' 'libsm' 'hicolor-icon-theme' 'gdbm' 'desktop-file-utils')
conflicts=('scidb')
options=('!buildflags' '!makeflags')
install=$pkgname.install
source=(svn://svn.code.sf.net/p/scidb/code/trunk
        $pkgname.install)
md5sums=('SKIP'
         '834d6728a567cc36a1c7ac1c68a7420f')

prepare() {
  cp -r $srcdir/$_realpkgname  $srcdir/$_realpkgname-build
}

build() {
	cd "$srcdir/$_realpkgname-build"
  make clean
 ./configure --prefix="/usr" --exec-prefix="/usr" --destdir=$pkgdir --mandir=/usr/share/man --enginesdir=/usr/bin --disable-freedesktop
#  ./configure --prefix="/usr" --exec-prefix="/usr" --destdir=$pkgdir --mandir=/usr/share/man --enginesdir=/usr/bin --disable-si4-debugging --disable-freedesktop --disable-symbols --disable-assertions --disable-gprof-profiling --enable-gcov-coverage
	make
}

package() {
	cd "$srcdir/$_realpkgname-build"
  make install
  sed -i -e "s@/usr/local/engines@/usr/share/scidb-beta/engines@g;s@$pkgdir@@g" $pkgdir/usr/bin/scidb-beta
  sed -i -e "s@$pkgdir@@g" $pkgdir/usr/bin/update-scidb-photo-files
}
